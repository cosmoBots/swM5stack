{"components":[{"id":"_m5stationscreen","createTime":1699131560817,"name":"screen","x":0,"y":0,"width":204,"height":114.75,"backgroundColor":"#222222","backgroundImage":"","size":0,"screenType":"default","type":"screen"},{"id":"____buttonA","createTime":1699131560817,"name":"ButtonA","buttonIndex":0,"x":52,"y":322,"width":64,"height":24,"text":"ButtonA","visibility":false,"type":"button"},{"id":"____buttonB","createTime":1699131560817,"name":"ButtonB","buttonIndex":1,"x":186,"y":322,"width":64,"height":24,"text":"ButtonB","visibility":false,"type":"button"},{"id":"____buttonC","createTime":1699131560817,"name":"ButtonC","buttonIndex":2,"x":321,"y":322,"width":64,"height":24,"text":"ButtonC","visibility":false,"type":"button"}],"type":"m5station","versions":"Beta","units":[],"hats":[],"stamps":[],"blockly":"<variables><variable id=\"FuHrd`gb)(|GA0}?eRwL\">valor</variable><variable id=\"1sb:$={Blx~Pr)B+V(f7\">v_activo</variable><variable id=\"ie@=s(f6fC1j!LE?|c~7\">v_actual</variable><variable id=\".mI,atJlwt$#mg~i@r+1\">v_anterior</variable><variable id=\"LHJ_A!vZi$y(V0]hw8Qz\">x</variable><variable id=\"D]-%~%NSe4NXK0Yf_JXK\">y</variable><variable id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</variable><variable id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</variable><variable id=\"QLHs+SbIxK{9d@?BiakU\">boton2</variable><variable id=\"Ch-DWpt?k8JW6A}}12X=\">led1</variable><variable id=\"9)sgCC*r[fMUeP-X1%$P\">led2</variable><variable id=\"m8K%gQq|4~-|h)o6|aym\">boton1ant</variable><variable id=\".B)[O|Zb;O:x`y*gDx]#\">boton2ant</variable><variable id=\"T+d[ss:xF[oUNM05AP[h\">led1ant</variable><variable id=\"Y4z_O**#^:o;+c):fxDr\">led2ant</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"-130\" y=\"-150\"><next><block type=\"pin_pinout\" id=\"!DSnjqYDZd`~*_dGUA8T\"><field name=\"PINGS\">pin0</field><field name=\"MODE\">IN</field><field name=\"PULL\">PULL_UP</field><comment pinned=\"false\" h=\"208\" w=\"597\">Programamos las entradas y salidas.\npin0 sera boton1 (entrada 32, pullup)\npin1 sera boton2 (entrada 33, pullup)\npin2 será led1 (salida 14 opendrain-pullup)\npin3 será led2 (salida 13 opendrain-pullup)\n* pullup significa que la patita del micro tendrá una resistencia interna que estará conectada a 5V, y así podemos conectar un botón sin tener que añadirle una resistencia externa.  Es algo muy amable que el micro hace por su parte y nos ahorra circuitería externa.\n* opendrain-pullup es un modo de la salida en el que el micro no fuerza ceros y unos, sino que fuerza ceros y \"circuitos abiertos\".  Esto hace que la salida funcione como un interruptor, es perfecto para encender leds.</comment><value name=\"PIN\"><shadow type=\"math_slider\" id=\"Cqj7;^6e^Yjl+:L#ivYY\"><field name=\"NUM\" max=\"36\" step=\"1\">32</field></shadow></value><next><block type=\"pin_pinout\" id=\"21jWK%%;R^=_%+NC{l!a\"><field name=\"PINGS\">pin1</field><field name=\"MODE\">IN</field><field name=\"PULL\">PULL_UP</field><value name=\"PIN\"><shadow type=\"math_slider\" id=\"y|4Jie3IAdsGBqWr~o:4\"><field name=\"NUM\" max=\"36\" step=\"1\">33</field></shadow></value><next><block type=\"pin_pinout\" id=\"2el%U(p/B~e8GvwR$r:P\"><field name=\"PINGS\">pin2</field><field name=\"MODE\">OUT_OD</field><field name=\"PULL\">PULL_UP</field><value name=\"PIN\"><shadow type=\"math_slider\" id=\"P/`[6%FQ[T[aas@qOZG3\"><field name=\"NUM\" max=\"36\" step=\"1\">14</field></shadow></value><next><block type=\"pin_pinout\" id=\"vgvT:d4xJ=1{x9_SU]hP\"><field name=\"PINGS\">pin3</field><field name=\"MODE\">OUT_OD</field><field name=\"PULL\">PULL_UP</field><value name=\"PIN\"><shadow type=\"math_slider\" id=\"ZZe3?QJRi{$!$P}XvcKj\"><field name=\"NUM\" max=\"36\" step=\"1\">13</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"!WaPZAUMz*BJ%!0I9CUo\"><mutation name=\"escribe_leyenda\"></mutation><next><block type=\"variables_set\" id=\"TqUTQ;ogNz{@gVwcdQvQ\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field><comment pinned=\"false\" h=\"73\" w=\"439\">Primera Entrada (Lectura de los sensores)\n-----------------------------------------\nboton2 y boton2 representarán las entradas (los botones).\n</comment><value name=\"VALUE\"><block type=\"pin_get_value\" id=\"53S4Qa|(u:@lwnU[Q@fh\"><field name=\"PINGS\">pin0</field></block></value><next><block type=\"variables_set\" id=\"pemR4NC64Vr-(_#y6q;T\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field><value name=\"VALUE\"><block type=\"pin_get_value\" id=\"cSte`wwZ7424=Q;mO9l9\"><field name=\"PINGS\">pin1</field></block></value><next><block type=\"variables_set\" id=\"u=bRCq:oAIEIZ*V3cgMs\"><field name=\"VAR\" id=\"Ch-DWpt?k8JW6A}}12X=\">led1</field><comment pinned=\"false\" h=\"106\" w=\"484\">Primera Función (Decisión + Acción)\n----------------------------------\nNuestra función es encender el led que corresponde a cada botón, así que preparamos y las salidas led en base a las entradas led.\nled1 y led2 son las variables que representarán a los leds.</comment><value name=\"VALUE\"><block type=\"variables_get\" id=\"/q+ae(cB#9[[W/)w-=UT\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field></block></value><next><block type=\"variables_set\" id=\"WAkpN]H;LER/dHvnchs:\"><field name=\"VAR\" id=\"9)sgCC*r[fMUeP-X1%$P\">led2</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"3BCKx=54qb6*cScS^.C?\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field></block></value><next><block type=\"variables_set\" id=\"(KKtMN#r^T/M~VN:HSSX\"><field name=\"VAR\" id=\"m8K%gQq|4~-|h)o6|aym\">boton1ant</field><comment pinned=\"false\" h=\"96\" w=\"515\">Necesitaremos filtrar las entradas y salidas para que no parpadee el refresco de pantalla.  De esta manera sólo escribiremos en pantalla si algo ha cambiado.  Para forzar que la primera vez se impriman las cosas ponemos como valor anterior lo contrario a lo que hemos puesto como valor actual.</comment><value name=\"VALUE\"><block type=\"logic_negate\" id=\"7ZlW5yciS62v`F8y1k_~\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"hPs*0JS_!8JM+r9Vo4xK\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field></block></value></block></value><next><block type=\"variables_set\" id=\"My5rKgH-c5%N!)I4X9Gh\"><field name=\"VAR\" id=\".B)[O|Zb;O:x`y*gDx]#\">boton2ant</field><value name=\"VALUE\"><block type=\"logic_negate\" id=\"Dt9*I]et}X;Faw+,b14o\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"zB.!|lW6P9fkd3r6IATg\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field></block></value></block></value><next><block type=\"variables_set\" id=\"n#Ti~=ng{tx)z`[1,.yt\"><field name=\"VAR\" id=\"T+d[ss:xF[oUNM05AP[h\">led1ant</field><value name=\"VALUE\"><block type=\"logic_negate\" id=\"]:6R:JU`%!ox+gZMA%@G\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"/l*ot3kzifYF0808?XI$\"><field name=\"VAR\" id=\"Ch-DWpt?k8JW6A}}12X=\">led1</field></block></value></block></value><next><block type=\"variables_set\" id=\",nh$xrHqSMK|BZ!V1/^)\"><field name=\"VAR\" id=\"Y4z_O**#^:o;+c):fxDr\">led2ant</field><value name=\"VALUE\"><block type=\"logic_negate\" id=\"%/{aN.-C=NWw1Au%0n^+\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"5.X`dA1ehsx0qHU!Rc8[\"><field name=\"VAR\" id=\"9)sgCC*r[fMUeP-X1%$P\">led2</field></block></value></block></value><next><block type=\"controls_whileUntil\" id=\"VA)Fn$f-PSG59n0*m5~U\"><field name=\"MODE\">WHILE</field><comment pinned=\"false\" h=\"112\" w=\"547\">Bucle\n-----\nHemos acabado la inicialización, aquí tenemos el bucle que se repetirá siempre.  Como ya hemos calculado la función en la inicialización, el bucle primero actuará, imprimirá, luego esperará, luego leerá las entradas y luego calculará la función para el siguiente bucle.</comment><value name=\"BOOL\"><block type=\"logic_boolean\" id=\"sX0js!Oh,KoR6J{q3nN|\"><field name=\"BOOL\">TRUE</field></block></value><statement name=\"DO\"><block type=\"pin_set_value\" id=\"eM!]GX5yl}W8kh9nE3K:\"><field name=\"PINGS\">pin2</field><comment pinned=\"false\" h=\"85\" w=\"564\">Salida (Escritura de los actuadores)\n------------------------------------\nActuamos escribiendo en las salidas (pin2 y pin3) el estado de los leds e imprimiendo los estados de las 4 variables por la pantalla.</comment><value name=\"PIN\"><shadow type=\"math_slider\" id=\"Tlz*{Kf`nbroh-~|u8s1\"><field name=\"NUM\" max=\"1\" step=\"1\">0</field></shadow><block type=\"variables_get\" id=\"Qj=JeKJ,CO|$A]jA09Kh\"><field name=\"VAR\" id=\"Ch-DWpt?k8JW6A}}12X=\">led1</field></block></value><next><block type=\"pin_set_value\" id=\"|to!GztO}sZ9.=qW,McK\"><field name=\"PINGS\">pin3</field><value name=\"PIN\"><shadow type=\"math_slider\"><field name=\"NUM\" max=\"1\" step=\"1\">0</field></shadow><block type=\"variables_get\" id=\"v2yS5h5SUxU]eD*`ztF(\"><field name=\"VAR\" id=\"9)sgCC*r[fMUeP-X1%$P\">led2</field></block></value><next><block type=\"timer_delay_ms\" id=\"Ik=PG6}Y/n0y3qv=/j6+\"><comment pinned=\"false\" h=\"162\" w=\"511\">Esperamos un tiempo para no estar contínuamente trabajando.  Esto viene bien por dos motivos: tener una base de tiempos estable para poder usar temporizadores mediante contadores (contando las iteraciones que han pasado y multiplicando por la base de tiempos) y también porque el microcontrolador tiene que hacer otras cosas (como ver si le estamos pidiendo ejecutar un programa nuevo, etc.).  Mientras nosotros esperamos el microcontrolador podrá ver si queremos que descarguemos algún programa nuevo.  Si nunca esperamos el controlador quedará bloqueado ejecutando sólo nuestro programa.</comment><value name=\"DELAY\"><shadow type=\"math_number\" id=\"%Y+Ysb?pkf;_fvHD(uK$\"><field name=\"NUM\">10</field></shadow></value><next><block type=\"variables_set\" id=\"O%c#g@}h3#y3UcCZXTe,\"><field name=\"VAR\" id=\"m8K%gQq|4~-|h)o6|aym\">boton1ant</field><comment pinned=\"false\" h=\"122\" w=\"431\">Uso la función monitorizar valor para mostrar la información en pantalla.  Lo hago para las 4 variables boton1, boton2, led1, led2.  La función también me devuelve calcula el nuevo valor anterior, que lo guardo en el boton anterior.</comment><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"EvhdthHBBtwaA+RLq6n/\"><mutation name=\"monitorizar_valor\"><arg name=\"v_actual\"></arg><arg name=\"v_anterior\"></arg><arg name=\"x\"></arg><arg name=\"y\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"EoSB@6OWzw~d{.VNrw|f\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"Sg.].{Ajvp_4?8eL)Dc;\"><field name=\"VAR\" id=\"m8K%gQq|4~-|h)o6|aym\">boton1ant</field></block></value><value name=\"ARG2\"><block type=\"math_number\" id=\"D7Af_7gQ^#bp|5,9-AKx\"><field name=\"NUM\">100</field></block></value><value name=\"ARG3\"><block type=\"math_number\" id=\"~TnPCC?JX1e)~kXC)-=0\"><field name=\"NUM\">0</field></block></value><value name=\"ARG4\"><block type=\"math_number\" id=\")}w$|;f!$$iJE6xUW8,b\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"variables_set\" id=\"xJI0bNYdz|dw.?vJBCIM\"><field name=\"VAR\" id=\".B)[O|Zb;O:x`y*gDx]#\">boton2ant</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"h]o=;f#.Q92DT2=W2sb*\"><mutation name=\"monitorizar_valor\"><arg name=\"v_actual\"></arg><arg name=\"v_anterior\"></arg><arg name=\"x\"></arg><arg name=\"y\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"q]EK$A#+RA0EGv4vO[[l\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"QkSH}we=?D2{rM{BgcQC\"><field name=\"VAR\" id=\".B)[O|Zb;O:x`y*gDx]#\">boton2ant</field></block></value><value name=\"ARG2\"><block type=\"math_number\" id=\"F=l:yTA~ndCCPuqOC!EJ\"><field name=\"NUM\">100</field></block></value><value name=\"ARG3\"><block type=\"math_number\" id=\"aXD+|8Y1ODv/vbM!I0`,\"><field name=\"NUM\">20</field></block></value><value name=\"ARG4\"><block type=\"math_number\" id=\":AHIhZPtiCUM=xPWuQZK\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"variables_set\" id=\"ZgzPDm63VKE/73Ue0R{u\"><field name=\"VAR\" id=\"T+d[ss:xF[oUNM05AP[h\">led1ant</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"6)@OF*_q7y19ammgx0PW\"><mutation name=\"monitorizar_valor\"><arg name=\"v_actual\"></arg><arg name=\"v_anterior\"></arg><arg name=\"x\"></arg><arg name=\"y\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"WN`S#?Hu(a~.QwPp6EP_\"><field name=\"VAR\" id=\"Ch-DWpt?k8JW6A}}12X=\">led1</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"`4nl{iV=[c8N+(msfo+-\"><field name=\"VAR\" id=\"T+d[ss:xF[oUNM05AP[h\">led1ant</field></block></value><value name=\"ARG2\"><block type=\"math_number\" id=\"?y(-iIM2?f]%D=I;ZYum\"><field name=\"NUM\">100</field></block></value><value name=\"ARG3\"><block type=\"math_number\" id=\"Y)KQ:-$7!NMMb`L`+gJ%\"><field name=\"NUM\">40</field></block></value><value name=\"ARG4\"><block type=\"math_number\" id=\"7(R..4Bo3D]}e2;J^x*w\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"variables_set\" id=\"yPIn:-gC(thoiWvC@QJp\"><field name=\"VAR\" id=\"Y4z_O**#^:o;+c):fxDr\">led2ant</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"h9WJv[k]$O5;h)xIl5V8\"><mutation name=\"monitorizar_valor\"><arg name=\"v_actual\"></arg><arg name=\"v_anterior\"></arg><arg name=\"x\"></arg><arg name=\"y\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"B:NG[x^rn%;afTw`Jx0m\"><field name=\"VAR\" id=\"9)sgCC*r[fMUeP-X1%$P\">led2</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"S0B}x?A2J$5Zn0Bc|q`9\"><field name=\"VAR\" id=\"Y4z_O**#^:o;+c):fxDr\">led2ant</field></block></value><value name=\"ARG2\"><block type=\"math_number\" id=\"}sSs,|{xgc?%p6lH5yv5\"><field name=\"NUM\">100</field></block></value><value name=\"ARG3\"><block type=\"math_number\" id=\"gTfF8KbdzKs=7JB9aVNw\"><field name=\"NUM\">60</field></block></value><value name=\"ARG4\"><block type=\"math_number\" id=\"Ulv0%EU[ZHJ.@DHpQd_U\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"variables_set\" id=\"9F|@dGNJJ)@7F1l)~BiE\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field><comment pinned=\"false\" h=\"120\" w=\"395\">Entrada (Lectura de los sensores)\n---------------------------------\nAquí es donde leemos nuestros sensores (los botones).  Los valores boton1 y boton2 serán los valores nuevos de la siguiente iteración, que podrían ser diferentes que los valores antiguos.</comment><value name=\"VALUE\"><block type=\"pin_get_value\" id=\"UI01:Axo3s#`iOJFlwfS\"><field name=\"PINGS\">pin0</field></block></value><next><block type=\"variables_set\" id=\"6kK6DMkg3ku6SIoc[l,,\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field><value name=\"VALUE\"><block type=\"pin_get_value\" id=\")5j.qsYy~U9{`|w4If?0\"><field name=\"PINGS\">pin1</field></block></value><next><block type=\"variables_set\" id=\"lPuiw-V%dHsR90Fa^q3k\"><field name=\"VAR\" id=\"Ch-DWpt?k8JW6A}}12X=\">led1</field><comment pinned=\"false\" h=\"95\" w=\"365\">Función (Decisión + Acción)\n---------------------------\nY aquí ejecutamos nuestra función, que es que los leds se enciendan cuando los botones lo hacen.</comment><value name=\"VALUE\"><block type=\"variables_get\" id=\"u|[x,(HcCZy+1+O|IU)~\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field></block></value><next><block type=\"variables_set\" id=\"i@LH]G;zAB(e}xv+mpnd\"><field name=\"VAR\" id=\"9)sgCC*r[fMUeP-X1%$P\">led2</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"gw%qi8)AA+%#yeGjVOrA\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type=\"button_callback\" id=\"i#V(z}YyF}A`[~}#?w7X\" x=\"450\" y=\"-90\"><field name=\"BUTTON\">A</field><field name=\"EVENT\">wasPressed</field><statement name=\"FUNC\"><block type=\"screen_set_bgcolor\" id=\"-6Cfl^mJsu:fL0q,D5GF\"><field name=\"COLOR\">#ff0000</field><next><block type=\"procedures_callnoreturn\" id=\"N),TyeVAudO}g}/xoby~\"><mutation name=\"escribe_leyenda\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"no]?]Jm6l]5d{26}T:c@\"><mutation name=\"escribe_variables\"></mutation></block></next></block></next></block></statement></block><block type=\"button_callback\" id=\"=D0u)RdV6sT%oE_:]wDI\" x=\"790\" y=\"-90\"><field name=\"BUTTON\">B</field><field name=\"EVENT\">wasPressed</field><statement name=\"FUNC\"><block type=\"screen_set_bgcolor\" id=\"^EE%(xfvVuWv*4[2MX!}\"><field name=\"COLOR\">#009900</field><next><block type=\"procedures_callnoreturn\" id=\"dNMDn:Y=f}d/=SVd/pI$\"><mutation name=\"escribe_leyenda\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"Q$t{Y}U}P+5n.v:pw~Ri\"><mutation name=\"escribe_variables\"></mutation></block></next></block></next></block></statement></block><block type=\"button_callback\" id=\"m/6S#:0z:/EFJ~Abd`~$\" x=\"1130\" y=\"-90\"><field name=\"BUTTON\">C</field><field name=\"EVENT\">wasPressed</field><statement name=\"FUNC\"><block type=\"screen_set_bgcolor\" id=\"Sa5NqB[Vh$=MI=64o2g|\"><field name=\"COLOR\">#3333ff</field><next><block type=\"procedures_callnoreturn\" id=\"XfG-I`k~PtjUi?LxqvV-\"><mutation name=\"escribe_leyenda\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"xq4hz^CL)V@R:v;Yxc.b\"><mutation name=\"escribe_variables\"></mutation></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"2Q%f{R38AWT-_|EOrWf^\" x=\"450\" y=\"70\"><field name=\"NAME\">escribe_leyenda</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe esta función...</comment><statement name=\"STACK\"><block type=\"lcd_print\" id=\"vKB5CpPqTOat2wC1v)Pe\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"54\" w=\"270\">Imprimimos las cabeceras en la pantalla</comment><value name=\"TEXT\"><shadow type=\"text\" id=\"]4gpcbqQw(0xWcF$qdBv\"><field name=\"TEXT\">bot1: </field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"@ipqOU{7?kk}Gy$8bni[\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"py~f8sQE`Hp{/V#,m#^3\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"lcd_print\" id=\"6mTO`xK;t*1u*LTQtJ5w\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><value name=\"TEXT\"><shadow type=\"text\" id=\"Wg$|][z)SKmaN52Yl#tc\"><field name=\"TEXT\">bot2: </field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"%8OiljVw5=KI;lLR|URl\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"h@Uc[RLBej^d6uVn37hK\"><field name=\"NUM\">20</field></shadow></value><next><block type=\"lcd_print\" id=\"_;8T)^Pf~vv}u9@)1Aui\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><value name=\"TEXT\"><shadow type=\"text\" id=\"-u6atT4C+aLHgHl+Gi;i\"><field name=\"TEXT\">led1: </field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\":RpDFU7(x^v(b0B2f^X~\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"ZVkhQONtH5gV(KT2IP#8\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"lcd_print\" id=\"tohc,MWxbX/A2TZy_Efr\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><value name=\"TEXT\"><shadow type=\"text\" id=\"H([$D`Lk[]xeEF`G|ZRm\"><field name=\"TEXT\">led2: </field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"s|*;a]r5:W[NmGKUiWLR\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"L7Q.lDk,HB!UYTyF:v2?\"><field name=\"NUM\">60</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defreturn\" id=\"(l:,ti7Wm6CqA+mMGTb]\" x=\"1070\" y=\"90\"><mutation><arg name=\"valor\" varid=\"FuHrd`gb)(|GA0}?eRwL\"></arg><arg name=\"v_activo\" varid=\"1sb:$={Blx~Pr)B+V(f7\"></arg></mutation><field name=\"NAME\">calcula_onoff</field><comment pinned=\"false\" h=\"87\" w=\"315\">Calcula el texto a escribir según si el valor está activo (On) o inactiva (Off).  El parámetro v_activo nos indica el valor que se considera activo (0 ó 1).</comment><statement name=\"STACK\"><block type=\"controls_ifelse\" id=\"]D]]d-Kr8=oFrr@-;X3x\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"OPw8+dZ{7rLD`))vXl2R\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"=MNt[o+n+W+-e*x2GMEB\"><field name=\"VAR\" id=\"FuHrd`gb)(|GA0}?eRwL\">valor</field></block></value><value name=\"B\"><block type=\"variables_get\" id=\":#?u]mg_UE]-(YFgxDnC\"><field name=\"VAR\" id=\"1sb:$={Blx~Pr)B+V(f7\">v_activo</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"Sru.n+N@k;E7jg4Qbd]B\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"text\" id=\"/#k;*)}s11$Us(p^F1:j\"><field name=\"TEXT\">On</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\" id=\"8~WJ)}(EbD9ubVqcK-Cb\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"text\" id=\"(M/gG%#,pS4L3+_E.%96\"><field name=\"TEXT\">Off</field></block></value></block></statement></block></statement><value name=\"RETURN\"><block type=\"variables_get\" id=\"rI}rjhpW%fI3j~ypfa$X\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value></block><block type=\"procedures_defnoreturn\" id=\"mz3{c,g4Gv[z0;Dz$db|\" x=\"510\" y=\"290\"><field name=\"NAME\">escribe_variables</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe esta función...</comment><statement name=\"STACK\"><block type=\"variables_set\" id=\"D!5{ooV4Iq8/U#F0AgLd\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"S!G|22{{z}QF-H+i?XZH\"><mutation name=\"calcula_onoff\"><arg name=\"valor\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"Sc6XlUV?5Ta@YG+fpK_%\"><field name=\"VAR\" id=\".0Kq+5SJmT/CbxmC,YHF\">boton1</field></block></value><value name=\"ARG1\"><block type=\"math_number\" id=\"H/7Tq;6C`_%QTzpTYoo]\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"lcd_print\" id=\"pP9M~o[}r14xd|Ljtd1M\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"68\" w=\"371\">Para borrar el valor anterior antes de pintar el nuevo, lo mejor es escribirlo en el color del fondo de pantalla.</comment><value name=\"TEXT\"><shadow type=\"text\"><field name=\"TEXT\">bot1: </field></shadow><block type=\"variables_get\" id=\"YNF!q=_DWb@}1abe$FsX\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"@in]Aq_Qa#EQs?,D~Uv6\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\";*i~v;?hvvc{][7I6*Ce\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\";wt6X}kT-1r;rD,*+Rno\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"Xf{gjVSNQ1WR:q3:tJ;G\"><mutation name=\"calcula_onoff\"><arg name=\"valor\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"=}~B`wM*LO,l47z8-X4$\"><field name=\"VAR\" id=\"QLHs+SbIxK{9d@?BiakU\">boton2</field></block></value><value name=\"ARG1\"><block type=\"math_number\" id=\"+XphGN09U2TxVK)u.qm]\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"lcd_print\" id=\"#Ta#@$[q@LMf%Dqp0P{K\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"68\" w=\"371\">Para borrar el valor anterior antes de pintar el nuevo, lo mejor es escribirlo en el color del fondo de pantalla.</comment><value name=\"TEXT\"><shadow type=\"text\"><field name=\"TEXT\">bot1: </field></shadow><block type=\"variables_get\" id=\"FyyH*eB6m]5ck0wlNYZ$\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"`(Wg}x%du0-RI8)X.S?a\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"6IYArvSnRu7);}f{T#Sk\"><field name=\"NUM\">20</field></shadow></value><next><block type=\"variables_set\" id=\"?n[b*o,HgP@nbr?~P[i;\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"Jdci:XxEMI)P^Q^exw%1\"><mutation name=\"calcula_onoff\"><arg name=\"valor\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"oj,R:c%=Q}./Lv;`CVXb\"><field name=\"VAR\" id=\"Ch-DWpt?k8JW6A}}12X=\">led1</field></block></value><value name=\"ARG1\"><block type=\"math_number\" id=\"lL62I1_;8[huSE#?rGbq\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"lcd_print\" id=\"-P7cG/y%PWROP)Jc0#jd\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"68\" w=\"371\">Para borrar el valor anterior antes de pintar el nuevo, lo mejor es escribirlo en el color del fondo de pantalla.</comment><value name=\"TEXT\"><shadow type=\"text\"><field name=\"TEXT\">bot1: </field></shadow><block type=\"variables_get\" id=\"bb8.r@?j}3(]2/=cKpU[\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"KDvRLW/Pai^E_qHTP!K7\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"^mT]#zwzFVvWKj??6lG`\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\" id=\"DG*cO?xna5v;,Zzr_~vL\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"}G[%VM3%.rA/[+W6:wkf\"><mutation name=\"calcula_onoff\"><arg name=\"valor\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"f1hdC:$x:d%?,6+Gzntk\"><field name=\"VAR\" id=\"9)sgCC*r[fMUeP-X1%$P\">led2</field></block></value><value name=\"ARG1\"><block type=\"math_number\" id=\".xz)+zTV1}#0qdI}:NB8\"><field name=\"NUM\">0</field></block></value></block></value><next><block type=\"lcd_print\" id=\"ID7]E6Z:{L15qmDKU}+:\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"68\" w=\"371\">Para borrar el valor anterior antes de pintar el nuevo, lo mejor es escribirlo en el color del fondo de pantalla.</comment><value name=\"TEXT\"><shadow type=\"text\"><field name=\"TEXT\">bot1: </field></shadow><block type=\"variables_get\" id=\"K4/BWuoG]C-p)GD%8Gm6\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"9p.`w,d%hLEjf8u^p_B}\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"cfyvnxA9A,n94Q%QvJr2\"><field name=\"NUM\">60</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defreturn\" id=\"I3wT)bVv5.iL?mr}]x4j\" x=\"530\" y=\"890\"><mutation><arg name=\"v_actual\" varid=\"ie@=s(f6fC1j!LE?|c~7\"></arg><arg name=\"v_anterior\" varid=\".mI,atJlwt$#mg~i@r+1\"></arg><arg name=\"x\" varid=\"LHJ_A!vZi$y(V0]hw8Qz\"></arg><arg name=\"y\" varid=\"D]-%~%NSe4NXK0Yf_JXK\"></arg><arg name=\"v_activo\" varid=\"1sb:$={Blx~Pr)B+V(f7\"></arg></mutation><field name=\"NAME\">monitorizar_valor</field><comment pinned=\"false\" h=\"89\" w=\"364\">Monitoriza el valor en pantalla sólo si este ha cambiado, en la posición de pantalla X,Y, y devuelve el nuevo valor anterior para la siguiente iteración.  v_activo indica el valor lógico que consideramos activo (0 ó 1)</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"N})IgldVHKZ4q8~q@[Cn\"><comment pinned=\"false\" h=\"64\" w=\"367\">Imprimiremos el estado de las variables sólo si éstas han cambiado.</comment><value name=\"IF0\"><block type=\"logic_compare\" id=\"8#~EyX=0U8qXDgcD@_I%\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"/$V/hce*SxWLb))o-O,Q\"><field name=\"VAR\" id=\".mI,atJlwt$#mg~i@r+1\">v_anterior</field></block></value><value name=\"B\"><block type=\"variables_get\" id=\"Au^R^MppR6Z#t@;{@7/F\"><field name=\"VAR\" id=\"ie@=s(f6fC1j!LE?|c~7\">v_actual</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"vt3q`~dVE(yDnCYMF3=2\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\"cixHf(]E~I[p=G,Qq.-u\"><mutation name=\"calcula_onoff\"><arg name=\"valor\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"CAKmLl%l0ZfSh1/DZy60\"><field name=\"VAR\" id=\".mI,atJlwt$#mg~i@r+1\">v_anterior</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"7eYCFehQ%=4{m+oNVjMT\"><field name=\"VAR\" id=\"1sb:$={Blx~Pr)B+V(f7\">v_activo</field></block></value></block></value><next><block type=\"lcd_print\" id=\"pSFejl?gOuG(t:LtEL%-\"><field name=\"COLOR\">#000000</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"68\" w=\"371\">Para borrar el valor anterior antes de pintar el nuevo, lo mejor es escribirlo en el color del fondo de pantalla.</comment><value name=\"TEXT\"><shadow type=\"text\" id=\"a[54dMQQ(?PqB!R=KxrR\"><field name=\"TEXT\">bot1: </field></shadow><block type=\"variables_get\" id=\"3Cdsg#_AjPpUCR3xrb6u\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"k%:}QedteIMszi,S_[n?\"><field name=\"NUM\">100</field></shadow><block type=\"variables_get\" id=\"7Zj]17@=GqT[RXh^j4hc\"><field name=\"VAR\" id=\"LHJ_A!vZi$y(V0]hw8Qz\">x</field></block></value><value name=\"Y\"><shadow type=\"math_number\" id=\"x3)mG^DFL#_dis^Kdl9L\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"ES?Fp8han9RCwI:_s];3\"><field name=\"VAR\" id=\"D]-%~%NSe4NXK0Yf_JXK\">y</field></block></value><next><block type=\"variables_set\" id=\"H(fk}4W-*vCh_|dh[w.q\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field><value name=\"VALUE\"><block type=\"procedures_callreturn\" id=\":!d?j~cUHIk|rG1j@P/6\"><mutation name=\"calcula_onoff\"><arg name=\"valor\"></arg><arg name=\"v_activo\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\".5SZ0|nsWA0hIzPkkrqr\"><field name=\"VAR\" id=\"ie@=s(f6fC1j!LE?|c~7\">v_actual</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"n!~E|Nr=0e+drcho[T*K\"><field name=\"VAR\" id=\"1sb:$={Blx~Pr)B+V(f7\">v_activo</field></block></value></block></value><next><block type=\"lcd_print\" id=\"ED+9wU~{U5d.UZmYCbW(\"><field name=\"COLOR\">#ffffff</field><field name=\"ROTATE\">0</field><comment pinned=\"false\" h=\"36\" w=\"213\">Imprimimos el nuevo valor</comment><value name=\"TEXT\"><shadow type=\"text\" id=\"Nujg[NlMHxd_U0Y?5=*v\"><field name=\"TEXT\">bot1: </field></shadow><block type=\"variables_get\" id=\"G|;f7HSO=Sz$n@*Gf9)n\"><field name=\"VAR\" id=\"%hWwf)*:g-o]7VMR$w{6\">_texto</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"en~w,x4Jz*+o4f:XS*YF\"><field name=\"NUM\">100</field></shadow><block type=\"variables_get\" id=\"`v)^6WKy7CLJ{s=-1%A#\"><field name=\"VAR\" id=\"LHJ_A!vZi$y(V0]hw8Qz\">x</field></block></value><value name=\"Y\"><shadow type=\"math_number\" id=\"DY/[m.6#h;Y;pJdsKKX;\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"KO!S_YL=odDP*AlI;Pu4\"><field name=\"VAR\" id=\"D]-%~%NSe4NXK0Yf_JXK\">y</field></block></value><next><block type=\"variables_set\" id=\"..`L!XVasNEhA8(r/,ih\"><field name=\"VAR\" id=\".mI,atJlwt$#mg~i@r+1\">v_anterior</field><comment pinned=\"false\" h=\"55\" w=\"510\">Una vez lo hemos usado en la función y lo hemos imprmido, el valor nuevo será ya el valor anterior de la siguiente iteración.</comment><value name=\"VALUE\"><block type=\"variables_get\" id=\"=L[(=xD6U^}re.goQTFH\"><field name=\"VAR\" id=\"ie@=s(f6fC1j!LE?|c~7\">v_actual</field></block></value></block></next></block></next></block></next></block></next></block></statement></block></statement><value name=\"RETURN\"><block type=\"variables_get\" id=\".-LdFzyBxRh/NQ{5b~Dq\"><field name=\"VAR\" id=\"ie@=s(f6fC1j!LE?|c~7\">v_actual</field></block></value></block>","Blockly.Remotes":[],"Blockly.RemotePlus":[{"id":"__title","blockId":"","createTime":1699191508655,"name":"M5RemoteTitle","dragAndDrop":false,"resizable":false,"options":{"minWidth":1,"minHeight":1,"maxWidth":6,"maxHeight":10,"defaultWidth":2,"defaultHeight":1},"w":2,"h":1,"bgColor":"#0080FF","color":"#fff","fontsize":"M","label":"M5Remote","interval":3000,"code":"","event":"","dataSource":"none","ezdataToken":"","topic":"","needShadow":false,"type":"title","x":0,"y":0}],"modules":["machine","pin"],"cbIdList_":[],"eventCBIdList_":[],"apikey":"1A66C590","uuid":"999b7da3-461f-4cf3-9a20-ab92aa8e1bfc"}